# =========================================
# Basis
# =========================================
Options -MultiViews

# Bevorzugt Datei im Unterordner als Startseite
DirectoryIndex im3_semesterprojekt/im3_index.php index.php index.html

<IfModule mod_rewrite.c>
  RewriteEngine On

  # Echte Dateien/Ordner nie umschreiben
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # Lange URL -> / (nur Schönheits-Redirect)
  RewriteCond %{THE_REQUEST} \s/im3_semesterprojekt/im3_index\.php(\s|\?) [NC]
  RewriteRule ^im3_semesterprojekt/im3_index\.php$ / [R=301,L]
  RewriteRule ^im3_semesterprojekt/?$ / [R=301,L]

  # Root auf die Datei im Unterordner
  RewriteRule ^$ im3_semesterprojekt/im3_index.php [L]
</IfModule>

# CORS nur für dein API
<IfModule mod_headers.c>
  <FilesMatch "^im3_semesterprojekt/im3_unload\.php$">
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type"
    Header always set Access-Control-Max-Age "86400"
  </FilesMatch>
</IfModule>

# (Optional) Caching
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/css "access plus 7 days"
  ExpiresByType application/javascript "access plus 7 days"
  ExpiresByType image/png "access plus 30 days"
  ExpiresByType image/jpeg "access plus 30 days"
  ExpiresByType image/gif "access plus 30 days"
  ExpiresByType image/svg+xml "access plus 30 days"
  ExpiresByType image/webp "access plus 30 days"
</IfModule>